@page "/Oscar"
@inherits ComponenteCore

    <HeadPage ImageSource="logo/oscar.png" Text="Official site of the Academy with history and general information on the Academy Awards, as well as photographs, events and screenings, and press releases." Link="https://www.oscars.org/"></HeadPage>

<CardMediaList @ref="cardPicture" Service="@serviceList" CardHeader="Best Motion Picture"></CardMediaList>
<CardMediaList @ref="cardAnimated" Service="@serviceList" CardHeader="Best Animated Feature Film"></CardMediaList>
<CardMediaList @ref="cardInternational" Service="@serviceList" CardHeader="Best International Feature Film"></CardMediaList>
<CardMediaList @ref="cardDocumentary" Service="@serviceList" CardHeader="Best Documentary Feature"></CardMediaList>

@code {
    public CardMediaList cardPicture { get; set; }
    public CardMediaList cardAnimated { get; set; }
    public CardMediaList cardInternational { get; set; }
    public CardMediaList cardDocumentary { get; set; }

    public IMediaListService serviceList { get; set; } = new Services.TMDB.ListService();

    //public bool FindExternalId { get; set; }

    //protected override async Task OnInitializedAsync()
    //{
    //    FindExternalId = Settings.TypeMedia == TypeMedia.tv;
    //}

    private Dictionary<string, object> GetExtraParameters(string list_id)
    {
        return new Dictionary<string, object>() { { "list_id", list_id } }; ;
    }

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            IsLoading = true;

            await LoadData();

            IsLoading = false;
        }
    }

    protected async Task LoadData()
    {
        _ = cardPicture.LoadData(Settings, GetExtraParameters("7103422"));
        _ = cardAnimated.LoadData(Settings, GetExtraParameters("7103492"));
        _ = cardInternational.LoadData(Settings, GetExtraParameters("7103493"));
        _ = cardDocumentary.LoadData(Settings, GetExtraParameters("7103488"));
    }
}