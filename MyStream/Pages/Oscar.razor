@page "/Oscar"
@inherits ComponenteCore
@inject IStringLocalizer<App> L

<HeadPage ImageSource="logo/oscar.png" Text="@L["oscar_desc"]" Link="https://www.oscars.org/"></HeadPage>

<CardMediaList @ref="cardPicture" Service="@serviceList" CardHeader="@L["MotionPicture"]"></CardMediaList>
<CardMediaList @ref="cardAnimated" Service="@serviceList" CardHeader="@L["Animated"]"></CardMediaList>
<CardMediaList @ref="cardInternational" Service="@serviceList" CardHeader="@L["International"]"></CardMediaList>
<CardMediaList @ref="cardDocumentary" Service="@serviceList" CardHeader="@L["Documentary"]"></CardMediaList>

@code {
    public CardMediaList cardPicture { get; set; }
    public CardMediaList cardAnimated { get; set; }
    public CardMediaList cardInternational { get; set; }
    public CardMediaList cardDocumentary { get; set; }

    public IMediaListService serviceList { get; set; } = new Services.TMDB.ListService();

    //public bool FindExternalId { get; set; }

    //protected override async Task OnInitializedAsync()
    //{
    //    FindExternalId = Settings.TypeMedia == TypeMedia.tv;
    //}

    private Dictionary<string, object> GetExtraParameters(string list_id)
    {
        return new Dictionary<string, object>() { { "list_id", list_id } }; ;
    }

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            IsLoading = true;

            await LoadData();

            IsLoading = false;
        }
    }

    protected async Task LoadData()
    {
        _ = cardPicture.LoadData(Settings, null, GetExtraParameters("7103422"));
        _ = cardAnimated.LoadData(Settings, null, GetExtraParameters("7103492"));
        _ = cardInternational.LoadData(Settings, null, GetExtraParameters("7103493"));
        _ = cardDocumentary.LoadData(Settings, null, GetExtraParameters("7103488"));
    }
}